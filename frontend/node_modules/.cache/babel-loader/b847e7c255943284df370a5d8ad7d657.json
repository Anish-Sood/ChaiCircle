{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\future university\\\\test\\\\social-media-app\\\\frontend\\\\src\\\\components\\\\Post.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FiHeart } from 'react-icons/fi';\nimport './Post.css';\n\n// Utility function to format timestamps\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatTimestamp = timestamp => {\n  const now = new Date();\n  const postDate = new Date(timestamp);\n  const diffInSeconds = Math.floor((now - postDate) / 1000);\n  if (diffInSeconds < 60) {\n    return 'Just now';\n  } else if (diffInSeconds < 3600) {\n    const minutes = Math.floor(diffInSeconds / 60);\n    return `${minutes}m ago`;\n  } else if (diffInSeconds < 86400) {\n    const hours = Math.floor(diffInSeconds / 3600);\n    return `${hours}h ago`;\n  } else if (diffInSeconds < 604800) {\n    const days = Math.floor(diffInSeconds / 86400);\n    return `${days}d ago`;\n  } else {\n    return postDate.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: postDate.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n    });\n  }\n};\nconst Post = ({\n  post\n}) => {\n  _s();\n  const [likes, setLikes] = useState(post.likes);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // Force re-render every minute to update relative time\n      setLikes(prev => prev); // This triggers a re-render\n    }, 60000); // Update every minute\n\n    return () => clearInterval(interval);\n  }, []);\n  const handleLike = async () => {\n    if (isLoading) return; // Prevent double clicks\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/posts/${post._id}/like`, {\n        method: 'POST'\n      });\n      const data = await response.json();\n      if (response.ok) {\n        // Only update with server response, no optimistic updates\n        setLikes(data.likes);\n        // You could track liked state differently if needed\n      }\n    } catch (error) {\n      console.error('Error liking post:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.author.profile_picture || '/default-profile.png',\n        alt: post.author.name,\n        className: \"post-author-img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-author-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"post-author-name\",\n          children: post.author.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"post-timestamp\",\n          children: formatTimestamp(post.created_at)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"post-content\",\n      children: post.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), post.image && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: post.image,\n      alt: \"\",\n      className: \"post-image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-actions\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLike,\n        className: `like-button ${isLiked ? 'liked' : ''}`,\n        disabled: isLoading,\n        children: [/*#__PURE__*/_jsxDEV(FiHeart, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: likes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(Post, \"fzPdhUK9rsobn1vEwmvbFGwNe4U=\");\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","FiHeart","jsxDEV","_jsxDEV","formatTimestamp","timestamp","now","Date","postDate","diffInSeconds","Math","floor","minutes","hours","days","toLocaleDateString","month","day","year","getFullYear","undefined","Post","post","_s","likes","setLikes","isLiked","setIsLiked","isLoading","setIsLoading","interval","setInterval","prev","clearInterval","handleLike","response","fetch","_id","method","data","json","ok","error","console","className","children","src","author","profile_picture","alt","name","fileName","_jsxFileName","lineNumber","columnNumber","created_at","content","image","onClick","disabled","_c","$RefreshReg$"],"sources":["D:/Code/future university/test/social-media-app/frontend/src/components/Post.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FiHeart } from 'react-icons/fi';\nimport './Post.css';\n\n// Utility function to format timestamps\nconst formatTimestamp = (timestamp) => {\n    const now = new Date();\n    const postDate = new Date(timestamp);\n    const diffInSeconds = Math.floor((now - postDate) / 1000);\n    \n    if (diffInSeconds < 60) {\n        return 'Just now';\n    } else if (diffInSeconds < 3600) {\n        const minutes = Math.floor(diffInSeconds / 60);\n        return `${minutes}m ago`;\n    } else if (diffInSeconds < 86400) {\n        const hours = Math.floor(diffInSeconds / 3600);\n        return `${hours}h ago`;\n    } else if (diffInSeconds < 604800) {\n        const days = Math.floor(diffInSeconds / 86400);\n        return `${days}d ago`;\n    } else {\n        return postDate.toLocaleDateString('en-US', {\n            month: 'short',\n            day: 'numeric',\n            year: postDate.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n        });\n    }\n};\n\nconst Post = ({ post }) => {\n    const [likes, setLikes] = useState(post.likes);\n    const [isLiked, setIsLiked] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    useEffect(() => {\n    const interval = setInterval(() => {\n        // Force re-render every minute to update relative time\n        setLikes(prev => prev); // This triggers a re-render\n    }, 60000); // Update every minute\n\n    return () => clearInterval(interval);\n    }, []);\n\n    const handleLike = async () => {\n        if (isLoading) return; // Prevent double clicks\n        \n        setIsLoading(true);\n        \n        try {\n            const response = await fetch(`/api/posts/${post._id}/like`, {\n                method: 'POST',\n            });\n            const data = await response.json();\n            \n            if (response.ok) {\n                // Only update with server response, no optimistic updates\n                setLikes(data.likes);\n                // You could track liked state differently if needed\n            }\n        } catch (error) {\n            console.error('Error liking post:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"post-card\">\n            <div className=\"post-header\">\n                <img \n                    src={post.author.profile_picture || '/default-profile.png'} \n                    alt={post.author.name} \n                    className=\"post-author-img\"\n                />\n                <div className=\"post-author-info\">\n                    <span className=\"post-author-name\">{post.author.name}</span>\n                    <span className=\"post-timestamp\">{formatTimestamp(post.created_at)}</span>\n                </div>\n            </div>\n            <p className=\"post-content\">{post.content}</p>\n            {post.image && <img src={post.image} alt=\"\" className=\"post-image\" />}\n            <div className=\"post-actions\">\n                <button \n                    onClick={handleLike} \n                    className={`like-button ${isLiked ? 'liked' : ''}`}\n                    disabled={isLoading}\n                >\n                    <FiHeart />\n                    <span>{likes}</span>\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default Post;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,gBAAgB;AACxC,OAAO,YAAY;;AAEnB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,eAAe,GAAIC,SAAS,IAAK;EACnC,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB,MAAMC,QAAQ,GAAG,IAAID,IAAI,CAACF,SAAS,CAAC;EACpC,MAAMI,aAAa,GAAGC,IAAI,CAACC,KAAK,CAAC,CAACL,GAAG,GAAGE,QAAQ,IAAI,IAAI,CAAC;EAEzD,IAAIC,aAAa,GAAG,EAAE,EAAE;IACpB,OAAO,UAAU;EACrB,CAAC,MAAM,IAAIA,aAAa,GAAG,IAAI,EAAE;IAC7B,MAAMG,OAAO,GAAGF,IAAI,CAACC,KAAK,CAACF,aAAa,GAAG,EAAE,CAAC;IAC9C,OAAO,GAAGG,OAAO,OAAO;EAC5B,CAAC,MAAM,IAAIH,aAAa,GAAG,KAAK,EAAE;IAC9B,MAAMI,KAAK,GAAGH,IAAI,CAACC,KAAK,CAACF,aAAa,GAAG,IAAI,CAAC;IAC9C,OAAO,GAAGI,KAAK,OAAO;EAC1B,CAAC,MAAM,IAAIJ,aAAa,GAAG,MAAM,EAAE;IAC/B,MAAMK,IAAI,GAAGJ,IAAI,CAACC,KAAK,CAACF,aAAa,GAAG,KAAK,CAAC;IAC9C,OAAO,GAAGK,IAAI,OAAO;EACzB,CAAC,MAAM;IACH,OAAON,QAAQ,CAACO,kBAAkB,CAAC,OAAO,EAAE;MACxCC,KAAK,EAAE,OAAO;MACdC,GAAG,EAAE,SAAS;MACdC,IAAI,EAAEV,QAAQ,CAACW,WAAW,CAAC,CAAC,KAAKb,GAAG,CAACa,WAAW,CAAC,CAAC,GAAG,SAAS,GAAGC;IACrE,CAAC,CAAC;EACN;AACJ,CAAC;AAED,MAAMC,IAAI,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EACvB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG1B,QAAQ,CAACuB,IAAI,CAACE,KAAK,CAAC;EAC9C,MAAM,CAACE,OAAO,EAAEC,UAAU,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC6B,SAAS,EAAEC,YAAY,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EAEjDC,SAAS,CAAC,MAAM;IAChB,MAAM8B,QAAQ,GAAGC,WAAW,CAAC,MAAM;MAC/B;MACAN,QAAQ,CAACO,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC;IAC5B,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;;IAEX,OAAO,MAAMC,aAAa,CAACH,QAAQ,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAIN,SAAS,EAAE,OAAO,CAAC;;IAEvBC,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAC,cAAcd,IAAI,CAACe,GAAG,OAAO,EAAE;QACxDC,MAAM,EAAE;MACZ,CAAC,CAAC;MACF,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAElC,IAAIL,QAAQ,CAACM,EAAE,EAAE;QACb;QACAhB,QAAQ,CAACc,IAAI,CAACf,KAAK,CAAC;QACpB;MACJ;IACJ,CAAC,CAAC,OAAOkB,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC9C,CAAC,SAAS;MACNb,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC;EAED,oBACI1B,OAAA;IAAKyC,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACtB1C,OAAA;MAAKyC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBACxB1C,OAAA;QACI2C,GAAG,EAAExB,IAAI,CAACyB,MAAM,CAACC,eAAe,IAAI,sBAAuB;QAC3DC,GAAG,EAAE3B,IAAI,CAACyB,MAAM,CAACG,IAAK;QACtBN,SAAS,EAAC;MAAiB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,eACFnD,OAAA;QAAKyC,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7B1C,OAAA;UAAMyC,SAAS,EAAC,kBAAkB;UAAAC,QAAA,EAAEvB,IAAI,CAACyB,MAAM,CAACG;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC5DnD,OAAA;UAAMyC,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAAEzC,eAAe,CAACkB,IAAI,CAACiC,UAAU;QAAC;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eACNnD,OAAA;MAAGyC,SAAS,EAAC,cAAc;MAAAC,QAAA,EAAEvB,IAAI,CAACkC;IAAO;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC7ChC,IAAI,CAACmC,KAAK,iBAAItD,OAAA;MAAK2C,GAAG,EAAExB,IAAI,CAACmC,KAAM;MAACR,GAAG,EAAC,EAAE;MAACL,SAAS,EAAC;IAAY;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACrEnD,OAAA;MAAKyC,SAAS,EAAC,cAAc;MAAAC,QAAA,eACzB1C,OAAA;QACIuD,OAAO,EAAExB,UAAW;QACpBU,SAAS,EAAE,eAAelB,OAAO,GAAG,OAAO,GAAG,EAAE,EAAG;QACnDiC,QAAQ,EAAE/B,SAAU;QAAAiB,QAAA,gBAEpB1C,OAAA,CAACF,OAAO;UAAAkD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACXnD,OAAA;UAAA0C,QAAA,EAAOrB;QAAK;UAAA2B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAC/B,EAAA,CAhEIF,IAAI;AAAAuC,EAAA,GAAJvC,IAAI;AAkEV,eAAeA,IAAI;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}